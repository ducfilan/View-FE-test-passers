<html>

<body>
    <h1 id="idWorkingNotify"><center>WORKING...</center></h1>

    <div id="idSumary">
        Total pass count: <b id="idPassCount">0</b>/<b id="idTotalParticipants"></b>
        <br/> Pass rate: <b id="idPassRate">0</b>%
        <ul id="idPassList">

        </ul>
    </div>

    <div id="idListResult">

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>

    <script type="text/javascript">
        String.prototype.matchAll = function(regexp) {
            var matches = [];
            this.replace(regexp, function() {
                var arr = ([]).slice.call(arguments, 0);
                var extras = arr.splice(-2);
                arr.index = extras[0];
                arr.input = extras[1];
                matches.push(arr);
            });
            return matches.length ? matches : null;
        };

        var listSbds = ["FE01-0073", "FE01-0167", "FE01-0007", "FE01-0008", "FE01-0104", "FE01-0028", "FE01-0047", "FE01-0058", "FE01-0030", "FE01-0126", "FE01-0011", "FE01-0137", "FE01-0087", "FE01-0071", "FE01-0080", "FE01-0053", "FE01-0141", "FE01-0088", "FE01-0181", "FE01-0172", "FE01-0049", "FE01-0123", "FE01-0105", "FE01-0096", "FE01-0045", "FE01-0144", "FE01-0026", "FE01-0009", "FE01-0034", "FE01-0032", "FE01-0165", "FE01-0019", "FE01-0173", "FE01-0078", "FE01-0086", "FE01-0110", "FE01-0166", "FE01-0098", "FE01-0148", "FE01-0129", "FE01-0002", "FE01-0038", "FE01-0189", "FE01-0187", "FE01-0182", "FE01-0100", "FE01-0046", "FE01-0111", "FE01-0099", "FE01-0023", "FE01-0095", "FE01-0042", "FE01-0191", "FE01-0169", "FE01-0178", "FE01-0136", "FE01-0116", "FE01-0039", "FE01-0163", "FE01-0117", "FE01-0168", "FE01-0082", "FE01-0040", "FE01-0152", "FE01-0101", "FE01-0021", "FE01-0043", "FE01-0120", "FE01-0185", "FE01-0183", "FE01-0089", "FE01-0146", "FE01-0094", "FE01-0130", "FE01-0103", "FE01-0014", "FE01-0188", "FE01-0151", "FE01-0065", "FE01-0157", "FE01-0041", "FE01-0050", "FE01-0015", "FE01-0055", "FE01-0192", "FE01-0112", "FE01-0175", "FE01-0077", "FE01-0150", "FE01-0155", "FE01-0052", "FE01-0004", "FE01-0005", "FE01-0064", "FE01-0170", "FE01-0076", "FE01-0068", "FE01-0085", "FE01-0013", "FE01-0012", "FE01-0036", "FE01-0179", "FE01-0102", "FE01-0081", "FE01-0134", "FE01-0171", "FE01-0109", "FE01-0075", "FE01-0106", "FE01-0059", "FE01-0003", "FE01-0138", "FE01-0177", "FE01-0022", "FE01-0006", "FE01-0057", "FE01-0162", "FE01-0121", "FE01-0156", "FE01-0107", "FE01-0190", "FE01-0056", "FE01-0145", "FE01-0044", "FE01-0180", "FE01-0017", "FE01-0090", "FE01-0149", "FE01-0159", "FE01-0083", "FE01-0063", "FE01-0160", "FE01-0035", "FE01-0153", "FE01-0061", "FE01-0132", "FE01-0164", "FE01-0084", "FE01-0010", "FE01-0143", "FE01-0033", "FE01-0070", "FE01-0027", "FE01-0062", "FE01-0020", "FE01-0124", "FE01-0029", "FE01-0154", "FE01-0054", "FE01-0016", "FE01-0139", "FE01-0147", "FE01-0018", "FE01-0060", "FE01-0135", "FE01-0097", "FE01-0079", "FE01-0072", "FE01-0025", "FE01-0125", "FE01-0108", "FE01-0069", "FE01-0158", "FE01-0186", "FE01-0176", "FE01-0142", "FE01-0115", "FE01-0001", "FE01-0074", "FE01-0066", "FE01-0093", "FE01-0122", "FE01-0161", "FE01-0037", "FE01-0131", "FE01-0118", "FE01-0067", "FE01-0119", "FE01-0140", "FE01-0113", "FE01-0024", "FE01-0048", "FE01-0174", "FE01-0127", "FE01-0133", "FE01-0128", "FE01-0091", "FE01-0092", "FE01-0051", "FE01-0184", "FE01-0031", "FE02-0020", "FE02-0008", "FE02-0028", "FE02-0025", "FE02-0023", "FE02-0005", "FE02-0017", "FE02-0024", "FE02-0022", "FE02-0010", "FE02-0012", "FE02-0003", "FE02-0004", "FE02-0021", "FE02-0018", "FE02-0006", "FE02-0001", "FE02-0002", "FE02-0019", "FE02-0007", "FE02-0015", "FE02-0011", "FE02-0014", "FE02-0026", "FE02-0013", "FE02-0009", "FE02-0016", "FE02-0027", "FE03-0009", "FE03-0061", "FE03-0041", "FE03-0064", "FE03-0062", "FE03-0039", "FE03-0018", "FE03-0012", "FE03-0015", "FE03-0023", "FE03-0013", "FE03-0060", "FE03-0032", "FE03-0066", "FE03-0043", "FE03-0056", "FE01-0114", "FE03-0034", "FE03-0071", "FE03-0069", "FE03-0049", "FE03-0050", "FE03-0008", "FE03-0003", "FE03-0057", "FE03-0025", "FE03-0002", "FE03-0010", "FE03-0005", "FE03-0068", "FE03-0067", "FE03-0004", "FE03-0045", "FE03-0014", "FE03-0053", "FE03-0072", "FE03-0051", "FE03-0033", "FE03-0027", "FE03-0036", "FE03-0029", "FE03-0028", "FE03-0058", "FE03-0021", "FE03-0059", "FE03-0047", "FE03-0026", "FE03-0007", "FE03-0030", "FE03-0048", "FE03-0016", "FE03-0031", "FE03-0046", "FE03-0022", "FE03-0042", "FE03-0040", "FE03-0035", "FE03-0044", "FE03-0054", "FE03-0038", "FE03-0019", "FE03-0006", "FE03-0037", "FE03-0055", "FE03-0011", "FE03-0024", "FE03-0001", "FE03-0063", "FE03-0065", "FE03-0017", "FE03-0070", "FE03-0052", "FE03-0020"];

        var listDobs = ["19881127", "19950921", "19900523", "19930118", "19890331", "19930218", "19930921", "19931203", "19911116", "19910421", "19921220", "19930710", "19930101", "19900810", "19870217", "19900609", "19830519", "19950805", "19860718", "19920301", "19930915", "19920601", "19920405", "19941103", "19920515", "19820518", "19920122", "19930616", "19930517", "19910819", "19920630", "19950708", "19931028", "19950806", "19931209", "19930806", "19880604", "19931214", "19950616", "19921010", "19921023", "19920104", "19910219", "19950410", "19930617", "19920218", "19930330", "19901009", "19950128", "19871011", "19911221", "19870224", "19921004", "19950810", "19931217", "19851102", "19940310", "19860502", "19951103", "19841105", "19940313", "19910722", "19930625", "19890920", "19920102", "19820901", "19930520", "19930209", "19930210", "19930605", "19870517", "19881220", "19931020", "19850227", "19940526", "19920307", "19920219", "19940311", "19930809", "19941114", "19931225", "19871120", "19931114", "19930904", "19880816", "19920904", "19951003", "19860505", "19890920", "19911204", "19921028", "19940324", "19930703", "19830903", "19930406", "19930605", "19931203", "19901013", "19880713", "19951018", "19880823", "19921203", "19930831", "19930821", "19910810", "19940809", "19931015", "19831109", "19870725", "19950815", "19951020", "19901128", "19930331", "19931207", "19821101", "19941215", "19930904", "19910523", "19891228", "19931025", "19890912", "19920904", "19950711", "19890620", "19950616", "19950227", "19921223", "19900218", "19940218", "19890928", "19910810", "19930323", "19930728", "19910206", "19921120", "19950804", "19871001", "19930620", "19830422", "19880322", "19931010", "19930209", "19950215", "19911003", "19940816", "19820506", "19951023", "19901214", "19931122", "19930726", "19881110", "19940620", "19880301", "19941128", "19931022", "19930314", "19890111", "19890814", "19911202", "19831113", "19921103", "19930210", "19940217", "19931104", "19950711", "19891112", "19931204", "19921101", "19860109", "19820609", "19930310", "19871230", "19871108", "19930226", "19920326", "19940525", "19931203", "19950522", "19870702", "19920507", "19910103", "19931215", "19951013", "19890327", "19930917", "19930523", "19920804", "19890601", "19910825", "19930801", "19890219", "19921102", "19900403", "19860326", "19850807", "19930305", "19850206", "19930801", "19870222", "19890504", "19910412", "19881120", "19890911", "19850514", "19940826", "19890906", "19911028", "19910429", "19890911", "19910929", "19861203", "19830514", "19910519", "19921230", "19881107", "19870920", "19910911", "19900325", "19870218", "19941028", "19880315", "19850423", "19901115", "19880410", "19910919", "19870319", "19870720", "19851123", "19860415", "19891018", "19911104", "19940106", "19930423", "19901206", "19900721", "19911202", "19930425", "19941006", "19921211", "19900221", "19930412", "19920110", "19930606", "19930901", "19911231", "19940429", "19890329", "19921125", "19931128", "19941224", "19880120", "19940531", "19920717", "19870201", "19910519", "19910204", "19920616", "19940812", "19931220", "19911114", "19940830", "19940412", "19920101", "19820618", "19940603", "19940227", "19880923", "19910916", "19900621", "19880316", "19880524", "19840220", "19910630", "19851224", "19810417", "19900929", "19890105", "19911106", "19900225", "19820319", "19920110", "19930120", "19930122", "19890420", "19890420", "19880228", "19950511", "19870328", "19910426", "19880223", "19891014", "19930414"]

        $("#idTotalParticipants").text(listSbds.length);

        var totalPassCount = 0;
        var totalParticipants = listSbds.length;
        
        $(function() {
            viewInfoOf(0);
        });

        function viewInfoOf(i) {
            $.ajax({
                url: "http://www.hhtp.gov.vn/protected/xpplication/index.php?option=com_content&task=view&id=20&Itemid=30&callback=jQuery22308680669658625255_1463896167283&sbd=" + listSbds[i] + "&ngaysinh=" + listDobs[i] + "&kq=1&_=1463896167284",
                type: "GET",
                contentType: "text/html; charset=utf-8",
                success: function(data) {
                    var userInfo = /<form[\s\S]*?\/form>/gmi.exec(data)[0].replace("<b>Thông tin thí sinh:</b>", "");

                    scoreMatches = userInfo.matchAll(/>(\d{3})</gmi);
                    if (scoreMatches != null) {
                        var scoreMorning = scoreMatches[0][1];
                        var scoreAfternoon = scoreMatches[1][1];

                        if (parseInt(scoreMorning) >= 600 && parseInt(scoreAfternoon) >= 600) {
                            $("#idPassCount").text(++totalPassCount);
                            $("#idPassList").append("<li>" + /<b>.*?<\/b>/gmi.exec(userInfo) + " >> Morning: " + scoreMorning + ", Afternoon: " + scoreAfternoon + "</li>");

                            $("#idPassRate").text(totalPassCount *100 / totalParticipants);
                        }
                    }

                    $("#idListResult").append(userInfo + "<br/>");

                    if (i < listSbds.length - 1) {
                        viewInfoOf(++i);
                    } else {
                        $("#idWorkingNotify").hide();
                    }
                },
                error: function(e) {
                    console.log(e.message);
                }
            });
        }

    </script>
</body>

</html>
